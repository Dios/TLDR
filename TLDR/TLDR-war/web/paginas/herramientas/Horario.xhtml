<?xml version="1.0"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"  
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                template="../../include/template/template.xhtml">
    <ui:define name="content">
        <script src="../../resources/javascript/calendar_es.js" type="text/javascript"></script>
        <h:outputStylesheet>
                .fc-button-group{
                    display:none;
                }
                .fc-today-button{
                    display:none;
                }
                .ui-widget-content .ui-state-highlight
                {
                    border: 1px solid #d5d5d5;
                    background: #fff;
                }
                .ui-widget .eventoMat{
                    background: #FFFF00;
                    color: #000; 
                }
                .ui-widget .eventoInd{
                    background: #610B38;
                    color: #fff; 
                } 
            </h:outputStylesheet>
        <h:form>  
            <p:growl id="messages"/>

            <p:menubar>
                <p:submenu label="File" icon="ui-icon-document">
                    <p:submenu label="New" icon="ui-icon-contact">
                        <p:menuitem value="Project" url="#" />
                        <p:menuitem value="Other" url="#" />
                    </p:submenu>
                    <p:menuitem value="Open" url="#" />
                    <p:separator />
                    <p:menuitem value="Quit" url="#" />
                </p:submenu>

                <p:submenu label="Edit" icon="ui-icon-pencil">
                    <p:menuitem value="Undo" url="#" icon="ui-icon-arrowreturnthick-1-w" />
                    <p:menuitem value="Redo" url="#" icon="ui-icon-arrowreturnthick-1-e" />
                </p:submenu>

                <p:submenu label="Help" icon="ui-icon-help">
                    <p:menuitem value="Contents" url="#" />
                    <p:submenu label="Search" icon="ui-icon-search">
                        <p:submenu label="Text">
                            <p:menuitem value="Workspace" url="#" />
                        </p:submenu>
                        <p:menuitem value="File" url="#" />
                    </p:submenu>
                </p:submenu>

                <p:submenu label="Actions" icon="ui-icon-gear">
                    <p:submenu label="Ajax" icon="ui-icon-refresh">
                        <p:menuitem value="Save" actionListener="#{menuView.save}" icon="ui-icon-disk" update="messages"/>
                        <p:menuitem value="Update" actionListener="#{menuView.update}" icon="ui-icon-arrowrefresh-1-w" update="messages"/>
                    </p:submenu>
                    <p:submenu label="Non-Ajax" icon="ui-icon-newwin">
                        <p:menuitem value="Delete" actionListener="#{menuView.delete}" icon="ui-icon-close" update="messages" ajax="false"/>
                    </p:submenu>
                </p:submenu>

                <p:menuitem value="Quit" url="http://www.primefaces.org" icon="ui-icon-close" />

            </p:menubar>

            <h:panelGrid columnClasses="value">
                <h3 style="margin-top: 0">Editable Schedule</h3>

                <p:schedule  id="schedule" allDaySlot="false" showHeader="false" value="#{scheduleView.eventModel}"     axisFormat='HH:mm", views: { week: { titleFormat: "D MMMM YYYY", columnFormat: "ddd DD-MM" }, day: { titleFormat: "D MMMM YYYY" } }, scrollTime: "17:00:00", dummy:"x' view="agendaWeek" widgetVar="myschedule" locale="es">

                    <p:ajax event="dateSelect" listener="#{scheduleView.onDateSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                    <p:ajax event="eventSelect" listener="#{scheduleView.onEventSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                    <p:ajax event="eventMove" listener="#{scheduleView.onEventMove}" update="messages" />
                    <p:ajax event="eventResize" listener="#{scheduleView.onEventResize}" update="messages" />

                </p:schedule>
                <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">
                    <h:panelGrid id="eventDetails" columns="2">
                        <p:outputLabel for="title" value="Titulo: " />
                        <p:inputText id="title" value="#{scheduleView.event.title}" required="true" />

                        <p:outputLabel for="from" value="Desde: " />
                        <p:calendar id="from" value="#{scheduleView.event.startDate}" pattern="dd/MM/yyyy HH:mm"/>

                        <p:outputLabel for="to" value="Hasta:" />
                        <p:calendar id="to" value="#{scheduleView.event.endDate}" pattern="dd/MM/yyyy HH:mm"/>

                        <p:commandButton type="reset" value="Reset" />
                        <p:commandButton id="addButton" value="Guardar" actionListener="#{scheduleView.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
                    </h:panelGrid>
                </p:dialog>    

            </h:panelGrid>
        </h:form>  
        <style type="text/css">
            .value {
                width: 1000px;
            }
        </style>

    </ui:define>
</ui:composition>